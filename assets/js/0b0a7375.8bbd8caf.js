(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2561],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,k=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(k,o(o({ref:t},c),{},{components:n})):a.createElement(k,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7688:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return p},toc:function(){return l},default:function(){return d}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),o=["components"],s={title:"cw721 Spec",sidebar_position:1},p={unversionedId:"cw-plus/cw721/spec",id:"cw-plus/cw721/spec",isDocsHomePage:!1,title:"CW721 Spec: Non Fungible Tokens",description:"cw721 package source code//github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw721/README.md",source:"@site/docs/cw-plus/cw721/spec.md",sourceDirName:"cw-plus/cw721",slug:"/cw-plus/cw721/spec",permalink:"/0.14/cw-plus/cw721/spec",editUrl:"https://github.com/CosmWasm/docs/edit/master/docs/cw-plus/cw721/spec.md",version:"current",sidebarPosition:1,frontMatter:{title:"cw721 Spec",sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Atomic Swaps",permalink:"/0.14/cw-plus/cw20/cw20-atomic-swap-spec"},next:{title:"Cw721 Basic",permalink:"/0.14/cw-plus/cw721/cw721-base"}},l=[{value:"Base",id:"base",children:[{value:"Messages",id:"messages",children:[]},{value:"Queries",id:"queries",children:[]},{value:"Receiver",id:"receiver",children:[]}]},{value:"Metadata",id:"metadata",children:[{value:"Queries",id:"queries-1",children:[]}]},{value:"Enumerable",id:"enumerable",children:[{value:"Queries",id:"queries-2",children:[]}]}],c={toc:l};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"cw721 package source code: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw721/README.md"},"https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw721/README.md")),(0,i.kt)("p",null,"cw721 is a specification for non-fungible tokens based on CosmWasm.\nThe name and design is based on Ethereum's ERC721 standard,\nwith some enhancements. The types in here can be imported by\ncontracts that wish to implement this  spec, or by contracts that call\nto any standard cw721 contract."),(0,i.kt)("p",null,"The specification is split into multiple sections, a contract may only\nimplement some of this functionality, but must implement the base."),(0,i.kt)("h2",{id:"base"},"Base"),(0,i.kt)("p",null,"This handles ownership, transfers, and allowances. These must be supported\nas is by all cw721 contracts. Note that all tokens must have an owner,\nas well as an ID. The ID is an arbitrary string, unique within the contract."),(0,i.kt)("h3",{id:"messages"},"Messages"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"TransferNft{recipient, token_id}")," -\nThis transfers ownership of the token to ",(0,i.kt)("inlineCode",{parentName:"p"},"recipient")," account. This is\ndesigned to send to an address controlled by a private key and ",(0,i.kt)("em",{parentName:"p"},"does not"),"\ntrigger any actions on the recipient if it is a contract."),(0,i.kt)("p",null,"Requires ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id")," to point to a valid token, and ",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender")," to be\nthe owner of it, or have an allowance to transfer it."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"SendNft{contract, token_id, msg}")," -\nThis transfers ownership of the token to ",(0,i.kt)("inlineCode",{parentName:"p"},"contract")," account. ",(0,i.kt)("inlineCode",{parentName:"p"},"contract"),"\nmust be an address controlled by a smart contract, which implements\nthe cw721Receiver interface. The ",(0,i.kt)("inlineCode",{parentName:"p"},"msg")," will be passed to the recipient\ncontract, along with the token_id."),(0,i.kt)("p",null,"Requires ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id")," to point to a valid token, and ",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender")," to be\nthe owner of it, or have an allowance to transfer it."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Approve{spender, token_id, expires}")," - Grants permission to ",(0,i.kt)("inlineCode",{parentName:"p"},"spender")," to\ntransfer or send the given token. This can only be performed when\n",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender")," is the owner of the given ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id")," or an ",(0,i.kt)("inlineCode",{parentName:"p"},"operator"),".\nThere can multiple spender accounts per token, and they are cleared once\nthe token is transfered or sent."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Revoke{spender, token_id}")," - This revokes a previously granted permission\nto transfer the given ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id"),". This can only be granted when\n",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender")," is the owner of the given ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id")," or an ",(0,i.kt)("inlineCode",{parentName:"p"},"operator"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ApproveAll{operator, expires}")," - Grant ",(0,i.kt)("inlineCode",{parentName:"p"},"operator")," permission to transfer or send\nall tokens owned by ",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender"),". This approval is tied to the owner, not the\ntokens and applies to any future token that the owner receives as well."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"RevokeAll{operator}")," - Revoke a previous ",(0,i.kt)("inlineCode",{parentName:"p"},"ApproveAll")," permission granted\nto the given ",(0,i.kt)("inlineCode",{parentName:"p"},"operator"),"."),(0,i.kt)("h3",{id:"queries"},"Queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"OwnerOf{token_id}")," - Returns the owner of the given token,\nas well as anyone with approval on this particular token.\nIf the token is unknown, returns an error. Return type is\n",(0,i.kt)("inlineCode",{parentName:"p"},"OwnerResponse{owner}"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ApprovedForAll{owner, include_expired}")," - List all operators that can\naccess all of  the owner's tokens. Return type is ",(0,i.kt)("inlineCode",{parentName:"p"},"ApprovedForAllResponse"),".\nIf ",(0,i.kt)("inlineCode",{parentName:"p"},"include_expired")," is set, show expired owners in the results, otherwise,\nignore them."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"NumTokens{}")," - Total number of tokens issued"),(0,i.kt)("h3",{id:"receiver"},"Receiver"),(0,i.kt)("p",null,"The counter-part to ",(0,i.kt)("inlineCode",{parentName:"p"},"SendNft")," is ",(0,i.kt)("inlineCode",{parentName:"p"},"ReceiveNft"),", which must be implemented by\nany contract that wishes to manage cw721 tokens. This is generally ",(0,i.kt)("em",{parentName:"p"},"not"),"\nimplemented by any cw721 contract."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ReceiveNft{sender, token_id, msg}")," - This is designed to handle ",(0,i.kt)("inlineCode",{parentName:"p"},"SendNft"),"\nmessages. The address of the contract is stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"env.sender"),"\nso it cannot be faked. The contract should ensure the sender matches\nthe token contract it expects to handle, and not allow arbitrary addresses."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"sender")," is the original account requesting to move the token\nand ",(0,i.kt)("inlineCode",{parentName:"p"},"msg")," is a ",(0,i.kt)("inlineCode",{parentName:"p"},"Binary")," data that can be decoded into a contract-specific\nmessage. This can be empty if we have only one default action,\nor it may be a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReceiveMsg")," variant to clarify the intention. For example,\nif I send to an exchange, I can specify the price I want to list the token\nfor."),(0,i.kt)("h2",{id:"metadata"},"Metadata"),(0,i.kt)("h3",{id:"queries-1"},"Queries"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ContractInfo{}")," - This returns top-level metadata about the contract.\nNamely, ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"symbol"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"NftInfo{token_id}")," - This returns metadata about one particular token.\nThe return value is based on ",(0,i.kt)("em",{parentName:"p"},"ERC721 Metadata JSON Schema"),", but directly\nfrom the contract, not as a Uri. Only the image link is a Uri."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AllNftInfo{token_id}")," - This returns the result of both ",(0,i.kt)("inlineCode",{parentName:"p"},"NftInfo"),"\nand ",(0,i.kt)("inlineCode",{parentName:"p"},"OwnerOf")," as one query as an optimization for clients, which may\nwant both info to display one NFT."),(0,i.kt)("h2",{id:"enumerable"},"Enumerable"),(0,i.kt)("h3",{id:"queries-2"},"Queries"),(0,i.kt)("p",null,"Pagination is acheived via ",(0,i.kt)("inlineCode",{parentName:"p"},"start_after")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"limit"),". Limit is a request\nset by the client, if unset, the contract will automatically set it to\n",(0,i.kt)("inlineCode",{parentName:"p"},"DefaultLimit")," (suggested 10). If set, it will be used up to a ",(0,i.kt)("inlineCode",{parentName:"p"},"MaxLimit"),"\nvalue (suggested 30). Contracts can define other ",(0,i.kt)("inlineCode",{parentName:"p"},"DefaultLimit")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"MaxLimit"),"\nvalues without violating the cw721 spec, and clients should not rely on\nany particular values."),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"start_after")," is unset, the query returns the first results, ordered by\nlexogaphically by ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id"),". If ",(0,i.kt)("inlineCode",{parentName:"p"},"start_after")," is set, then it returns the\nfirst ",(0,i.kt)("inlineCode",{parentName:"p"},"limit")," tokens ",(0,i.kt)("em",{parentName:"p"},"after")," the given one. This allows straight-forward\npagination by taking the last result returned (a ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id"),") and using it\nas the ",(0,i.kt)("inlineCode",{parentName:"p"},"start_after")," value in a future query."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Tokens{owner, start_after, limit}")," - List all token_ids that belong to a given owner.\nReturn type is ",(0,i.kt)("inlineCode",{parentName:"p"},"TokensResponse{tokens: Vec<token_id>}"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AllTokens{start_after, limit}")," - Requires pagination. Lists all token_ids controlled by\nthe contract."))}d.isMDXComponent=!0}}]);